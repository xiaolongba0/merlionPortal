<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">  

    <c:set var="import" value="templateuser.xhtml"/>
    <c:if test="#{dashboardBean.canUseCI() || dashboardBean.loginedUser.userType == 'superuser'}">
        <c:set var="import" value="templateadmin.xhtml"/>
    </c:if>

    <ui:composition template="${root}/templates/${import}">        
        <ui:param name="pageName" value="MRP II Add New Product" />

        <ui:define name="more-imports">
            <ui:insert>
                <link rel="stylesheet" href="${request.contextPath}/css/mrp.css" type="text/css" />
            </ui:insert>
        </ui:define>

        <ui:define name="left">
             <p:panelMenu>
                    <p:submenu label="HOME" styleClass="display:block">
                        <p:menuitem value="MRP II Home" url="mrp.xhtml" />
                    </p:submenu>
                    <c:if test="#{dashboardBean.checkMRPCanManageProductComponent() || dashboardBean.loginedUser.userType == 'superuser'}">
                        <p:submenu label="Product Management" styleClass="display:block">
                            <p:submenu label="Product Catalog Management">
                                <p:menuitem value="Add New Product" url="addnewproduct.xhtml" />
                                <p:menuitem value="View, Edit and Delete" url="viewallproducts.xhtml" />
                            </p:submenu>
                            <p:submenu label="BOM Management">
                                <p:menuitem value="Add a New Component" url="addnewcomponent.xhtml" />
                                <p:menuitem value="View, Edit and Delete BOM" url="viewbom.xhtml" />
                            </p:submenu>
                        </p:submenu>
                    </c:if>
                    <c:if test="#{dashboardBean.checkMRPCanManageUseForecast() || dashboardBean.loginedUser.userType == 'superuser'}">
                        <p:submenu label="Material Requirement Planning" styleClass="display:block">
                            <p:submenu label="Forecasting">
                                <p:menuitem value="Forecasting" url="forecast.xhtml" />
                            </p:submenu>
                        </p:submenu>
                    </c:if>

                </p:panelMenu>

        </ui:define>

        <ui:define name="right">
            <h:form>
                <p:panel header="View Sales History in the past 24 months" style="margin-bottom:10px;">
                    <p:chart type="line" model="#{forecastShowHistoryManagedBean.purchaseHistory}" style="height:300px" />
                </p:panel>

                <p:panel header="Based on the available sales history, do you want to proceed?" style="margin-bottom:10px;"> 
                  
                        <div>Note: MRP II system uses Time Series Based Forecasting technique, in general, if number 
                                      of months of sales record is less than 24 months, the forecasting result might have large deviation.
                                      Do you want to proceed?</div>
                        
                        <p:commandButton value="Yes"  action="#{forecastManagedBean.proceedGetUserInput}" />
                        <p:commandButton value="No"  action="#{forecastManagedBean.stopForecasting}" />
              
                </p:panel>
            </h:form>
        </ui:define>
    </ui:composition>
</html>

